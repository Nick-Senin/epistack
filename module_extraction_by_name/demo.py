"""
–î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª—è StateTransformationExtractor
"""
import os
import sys
from pathlib import Path

sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from config.llm import configure_llm
from module_extraction_by_name.module import StateTransformationExtractor


OPTIMIZED_MODULE_PATH = Path(__file__).with_name("optimized_module.json")


def main():
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM
    print("üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM...")
    configure_llm()
    
    # –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –º–æ–¥—É–ª—è
    print("\nüì¶ –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥—É–ª—è StateTransformationExtractor...")
    extractor = StateTransformationExtractor()

    if OPTIMIZED_MODULE_PATH.exists():
        print(f"\nüß† –ù–∞–π–¥–µ–Ω –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å: {OPTIMIZED_MODULE_PATH}")
        try:
            extractor.load(str(OPTIMIZED_MODULE_PATH))
            print("‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ StateTransformationExtractor")
        except Exception as exc:
            print(f"‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å: {exc}")
            print("   ‚û§ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è StateTransformationExtractor")
    else:
        print(f"\n‚ö†Ô∏è –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω ({OPTIMIZED_MODULE_PATH})")
        print("   ‚û§ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∞–∑–æ–≤–∞—è –≤–µ—Ä—Å–∏—è StateTransformationExtractor")
    
    # –ü—Ä–∏–º–µ—Ä —Ç–µ–∫—Å—Ç–∞
    example_text = """ 
–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –∏–º–µ–Ω–Ω–æ –Ω–∞—à–∏ –∏–≥—Ä—ã –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏–ª–∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≥–µ–π–º–ø–ª–µ—è –∏ –Ω–µ—Å–æ–º–Ω–µ–Ω–Ω–æ –ø–æ–≤–ª–∏—è–ª–∏ –Ω–∞ –µ–≥–æ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∞—Å–ø–µ–∫—Ç.

DOOM –ª–µ–≥–ª–∞ –≤ –æ—Å–Ω–æ–≤—É –ø–µ—Ä–≤—ã—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Ç—É—Ä–Ω–∏—Ä–æ–≤, –ø–æ–ª–æ–∂–∏–≤ –Ω–∞—á–∞–ª–æ –∫–∏–±–µ—Ä—Å–ø–æ—Ä—Ç—É. –ê—Ä–∫–∞–¥–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã —Ö–æ—Ç–µ–ª–∏ –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ —Å–æ–∂—Ä–∞—Ç—å –µ—â–µ –æ–¥–∏–Ω —á–µ—Ç–≤–µ—Ä—Ç–∞–∫, –∞ –≥–µ–π–º–µ—Ä—ã —É—Å–µ—Ä–¥–Ω–æ —ç—Ç–æ–º—É —Å–æ–ø—Ä–æ—Ç–∏–≤–ª—è–ª–∏—Å—å.

–í Wolfenstein 3D —è –ø—Ä–∏–¥—É–º–∞–ª –Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è ‚Äî –æ–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ —Ä–∞–º–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —É–ª–æ–∂–∏—Ç—å—Å—è –¥–ª—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –ø–æ –Ω–∞—à–∏–º —Ä–∞—Å—á–µ—Ç–∞–º. –≠—Ç–æ –ø–µ—Ä–µ–∫–æ—á–µ–≤–∞–ª–æ –∏ –≤ DOOM, –Ω–æ, –∫–∞–∫ —è —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–ª–∞–≤–µ, –º—ã –æ–±—ä–µ–¥–∏–Ω–∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é —Å –¥—Ä—É–≥–æ–π, –ø–æ–∑–≤–æ–ª—è—é—â–µ–π —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è –∫–ª–∞–≤–∏—à, —á—Ç–æ–±—ã –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∑–∞–ø–∏—Å—å —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è.

–Ø —Å—á–∏—Ç–∞–ª, —á—Ç–æ —ç—Ç–æ –∫—Ä—É—Ç–∞—è –∏–¥–µ—è: –ª—é–¥–∏ —Å–º–æ–≥—É—Ç –ø–µ—Ä–µ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–æ—á–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã —É–±–∏–π—Å—Ç–≤–∞ –æ–ø–ø–æ–Ω–µ–Ω—Ç–∞ –≤ –¥–µ–∑–º–∞—Ç—á–µ –∏–ª–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –æ—à–∏–±–∫–∏. –ù–æ –º–Ω–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–æ –≤ –≥–æ–ª–æ–≤—É, —á—Ç–æ —Å–æ—á–µ—Ç–∞–Ω–∏–µ –Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–∏–π –∏ –∑–∞–ø–∏—Å–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–¥–∏–∫–∞–ª—å–Ω–æ –ø–æ–≤–ª–∏—è—é—Ç –Ω–∞ –≥–µ–π–º–ø–ª–µ–π ‚Äî –∏ –ø–æ—Ä–æ–¥—è—Ç —Å–ø–∏–¥—Ä–∞–Ω—ã.

–°–ø–∏–¥—Ä–∞–Ω–æ–º –Ω–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ –∏–≥—Ä—ã –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –∑–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è ‚Äî —Å–µ–π—á–∞—Å —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –¥–æ–∫—Ç—Ä–∏–Ω–∞ –≥–µ–π–º–ø–ª–µ—è. –ù—ã–Ω–µ —ç—Ç–æ –∫–∞–∂–µ—Ç—Å—è —á–µ–º-—Ç–æ —Å–∞–º–∏–º —Å–æ–±–æ–π —Ä–∞–∑—É–º–µ—é—â–∏–º—Å—è, –Ω–æ –¥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–º–∏–Ω–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∑–∞–ø–∏—Å–∏ –ø–æ–≤—Ç–æ—Ä–æ–≤ –≤ DOOM –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ –Ω–∏–∫–∞–∫–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –¥–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ—Ä–¥.

–ù–∞—à–∞ —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø–∏—Å–∏ –ø–æ–∑–≤–æ–ª–∏–ª–∞ –≥–µ–π–º–µ—Ä–∞–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞, –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–∫—Å–∏—Ä—É—è –≤—Ä–µ–º—è, –Ω–æ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥—è –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–µ–ª–∏ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º. –≠—Ç–æ –±—ã–ª –≤–∞–∂–Ω–µ–π—à–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Å–ø–∏–¥—Ä–∞–Ω–æ–≤ –∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Å—Ü–∏–ø–ª–∏–Ω.

–í —Ç–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –º–µ—Å—è—Ü–µ–≤ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ DOOM –∫—Ç–æ-—Ç–æ —Å–æ–∑–¥–∞–ª —Å–∞–π—Ç –¥–ª—è —Å–ø–∏–¥—Ä–∞–Ω–µ—Ä–æ–≤, —á—Ç–æ–±—ã –∏–≥—Ä–æ–∫–∏ –º–æ–≥–ª–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Å–≤–æ–∏ –¥–µ–º–æ–≤–µ—Ä—Å–∏–∏. –í 2022 –≥–æ–¥—É —è –º–æ–≥ –≤–±–∏—Ç—å –≤ Google –∑–∞–ø—Ä–æ—Å ¬´Speedrun YouTube¬ª –∏ –º–Ω–µ –ø—Ä–µ–¥–ª–∞–≥–∞–ª–æ—Å—å –±–æ–ª–µ–µ –¥–µ—Å—è—Ç–∏ –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –∞ —Å—Ç—Ä–∏–º–∏–Ω–≥–æ–≤—ã–π —Å–∞–π—Ç Twitch –ø–æ –¥–∞–Ω–Ω—ã–º Statista –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∫–≤–∞—Ä—Ç–∞–ª–∞ –Ω–∞—Å—á–∏—Ç—ã–≤–∞–ª –≤ —Å—Ä–µ–¥–Ω–µ–º 2,93 –º–∏–ª–ª–∏–æ–Ω–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑—Ä–∏—Ç–µ–ª–µ–π.

–ü—Ä—è–º–∞—è —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è –∏–≥—Ä –≤ –∫–∞–∫–æ–º-—Ç–æ —Å–º—ã—Å–ª–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å—é —Å–ø–∏–¥—Ä–∞–Ω–æ–≤, –Ω–æ —è —Å—á–∏—Ç–∞—é, —á—Ç–æ –º–µ–∂–¥—É –Ω–∏–º–∏ –µ—Å—Ç—å —Å–≤—è–∑—å. –î–µ–º–æ —Å–ø–∏–¥—Ä–∞–Ω-–∑–∞–±–µ–≥–æ–≤ –≤ DOOM ‚Äî —ç—Ç–æ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏ Twitch. –ò —Ç–æ, –∏ –¥—Ä—É–≥–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∏—Ç—å—Å—è —Å–≤–æ–∏–º –≥–µ–π–º–ø–ª–µ–µ–º —Å –¥—Ä—É–≥–∏–º–∏, —á—Ç–æ–±—ã –ø–æ—Ö–≤–∞—Å—Ç–∞—Ç—å—Å—è, –±—Ä–æ—Å–∏—Ç—å –∫–æ–º—É-—Ç–æ –≤—ã–∑–æ–≤ –∏–ª–∏ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å, –∫–∞–∫ –ø—Ä–æ–π—Ç–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–∂–Ω–æ–µ. –í—Å–µ —ç—Ç–æ —Ä–µ–∞–ª–∏–∑—É–µ–º–æ –∏ –≤ –ø—Ä—è–º–æ–º —ç—Ñ–∏—Ä–µ, –∏ –≤ —Ä–µ–∂–∏–º–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏.

–ò–¥–µ—è –∏–≥—Ä –∫–∞–∫ –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞ –¥–ª—è –∑—Ä–∏—Ç–µ–ª–µ–π –ø–æ —Å–µ–π –¥–µ–Ω—å –∫–∞–∂–µ—Ç—Å—è –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –¥–∏–∫–æ–π, –Ω–æ –ª–∏—á–Ω–æ —è —Ä–æ—Å, –Ω–∞–±–ª—é–¥–∞—è –∑–∞ –¥—Ä—É–≥–∏–º–∏ –¥–µ—Ç—å–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å–∞–º–∏ —Ä—É–±–∏–ª–∏—Å—å –≤ –∞–≤—Ç–æ–º–∞—Ç—ã, –ø–æ—ç—Ç–æ–º—É –Ω–µ –≤–∏–∂—É –∑–¥–µ—Å—å –Ω–∏–∫–∞–∫–∏—Ö —Å—Ç—Ä–∞–Ω–Ω–æ—Å—Ç–µ–π.

–î–ª—è –º–µ–Ω—è Twitch ‚Äî —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∞—Ä–∫–∞–¥–Ω—ã–π –∑–∞–ª, —Ü–∏—Ñ—Ä–æ–≤–æ–µ –≤–æ—Å—Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—ã—Ç–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ —Ç–µ–º, –∫–∞–∫ –∫—Ç–æ-—Ç–æ –∏–≥—Ä–∞–µ—Ç –≤ –±–∞—Ä–µ, –ø–∏—Ü—Ü–µ—Ä–∏–∏ –∏–ª–∏ –≥–¥–µ-—Ç–æ –µ—â–µ. –í –æ–Ω–ª–∞–π–Ω–µ –ª—é–¥–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –¥–ª—è —Ç–æ–π –∂–µ —Ü–µ–ª–∏, —á—Ç–æ –±—ã–ª–∞ –≤ –∞—Ä–∫–∞–¥–Ω—ã—Ö –∑–∞–ª–∞—Ö: –ø–æ–∏–≥—Ä–∞—Ç—å, –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏–ª–∏ –Ω–∞–π—Ç–∏ –Ω–æ–≤—ã–µ –∏–≥—Ä—ã.

–ú–æ–¥–¥–∏–Ω–≥, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —É—Ä–æ–≤–Ω–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ, –∏–∑–º–µ–Ω–∏–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≥–µ–π–º–µ—Ä–æ–≤ –æ —Ç–æ–º, –∫–∞–∫ –º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –ª—é–±–∏–º—ã–º–∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è–º–∏ –∏ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.

–ì–æ–¥–æ–º —Ä–∞–Ω–µ–µ –≤ –ø—Ä–µ—Å—Å-—Ä–µ–ª–∏–∑–µ –º—ã –æ–±—ä—è–≤–∏–ª–∏ —Å–ª–µ–¥—É—é—â–µ–µ: DOOM –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç–æ–π –∏–≥—Ä–æ–π, –∞ id –ø–æ–¥–µ–ª–∏—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–º, —á—Ç–æ –º–æ–¥–¥–µ—Ä—ã —Å–º–æ–≥—É—Ç —Å –Ω–µ–π –¥–µ–ª–∞—Ç—å. –í —Ç–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –Ω–µ–¥–µ–ª—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ –º—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª–∏ –≤ —Å–µ—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑—É–µ–º—É—é –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π, —Ç–µ–º —Å–∞–º—ã–º –≤—ã–ø–æ–ª–Ω–∏–≤ –æ–±–µ—â–∞–Ω–∏–µ.

–†–µ—à–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç—å DOOM –¥–ª—è –ø—É–±–ª–∏–∫–∏ –±—ã–ª–æ –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω—ã–º –¥–ª—è –º–µ–Ω—è –∏ –î–∂–æ–Ω–∞. –≠—Ç–æ —á–∞—Å—Ç—å –Ω–∞—à–µ–π —Å—É—Ç–∏ –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. –ú—ã –≤–µ—Ä–∏–ª–∏: —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –Ω—É–∂–Ω–æ –¥–µ–ª–∏—Ç—å—Å—è, —á—Ç–æ–±—ã –ª—é–¥–∏ –º–æ–≥–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–≤–æ—Ä–µ–Ω–∏—è. –ò –∂–¥–∞–ª–∏, —á—Ç–æ –æ–Ω–∏ —Å–∞–º–∏ —Å–æ–∑–¥–∞–¥—É—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã, –Ω–æ–≤—ã–µ —É—Ä–æ–≤–Ω–∏, –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã, —Ç–µ–∫—Å—Ç—É—Ä—ã —Å—Ç–µ–Ω –∏ –Ω–æ–≤—ã—Ö –º–æ–Ω—Å—Ç—Ä–æ–≤. –° –æ–≥—Ä–æ–º–Ω—ã–º –Ω–µ—Ç–µ—Ä–ø–µ–Ω–∏–µ–º!

–°—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö NeXTSTEP, –ø–æ—ç—Ç–æ–º—É –Ω–∞—à —Ä–µ–¥–∞–∫—Ç–æ—Ä —É—Ä–æ–≤–Ω–µ–π –Ω–∞ –æ—Å–Ω–æ–≤–µ Objective-C –º–æ–≥ –æ–∫–∞–∑–∞—Ç—å—Å—è –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è 99,9 % –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî –≤–µ–¥—å –æ–Ω–∏ –∏–≥—Ä–∞–ª–∏ –Ω–∞ PC —Å DOS.

–° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –∏–º–µ—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —Å–º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Äî —ç—Ç–æ –∏ –ø—Ä–æ–∏–∑–æ—à–ª–æ.

–í —Ç–µ—á–µ–Ω–∏–µ –¥–≤—É—Ö –º–µ—Å—è—Ü–µ–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ DOOM –æ–±–º–µ–Ω–∏–≤–∞–ª–æ—Å—å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π. –ü–µ—Ä–≤—ã–π –∏–∑ –≤—ã–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–∞–∑—ã–≤–∞–ª—Å—è DEU ‚Äî Doom Editing Utilities. –ù–µ–ø—Ä–æ—Å—Ç–∞—è –≤–µ—â–∏—Ü–∞! –í –Ω–µ–≥–æ –±—ã–ª –≤—Å—Ç—Ä–æ–µ–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä WAD, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–ª –¥–æ–±–∞–≤–ª—è—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –≥—Ä–∞—Ñ–∏–∫—É.

–ü–æ—Ç–æ–º –ø–æ—è–≤–∏–ª–∏—Å—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø–æ —Ä–∞–±–æ—Ç–µ —Å BSP (binary space partition). –û–Ω–∏ –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª–∏ –∫–∞—Ä—Ç—ã –¥–ª—è DOOM, —á—Ç–æ–±—ã –∏–≥—Ä–∞ –º–æ–≥–ª–∞ –∏—Ö –∑–∞–ø—É—Å—Ç–∏—Ç—å.

–í—ã—à–ª–∞ –º–∞—Å—Å–∞ —É—Ç–∏–ª–∏—Ç –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è WAD-—Ñ–∞–π–ª–æ–≤, –∞ –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö, DeHackEd, –ø–æ–∑–≤–æ–ª—è–ª–∞ –º–µ–Ω—è—Ç—å –ª—é–±—ã–µ —Å—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –¥–≤–∏–∂–∫–µ: –æ—Ç —É—Ä–æ–Ω–∞ –ø—É–ª—å –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∫–µ—Ç –¥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–¥–æ—Ä–æ–≤—å—è —É –ö–∏–±–µ—Ä–¥–µ–º–æ–Ω–∞.

–í —Ä—É–∫–∞—Ö –∏–≥—Ä–æ–∫–æ–≤ –æ–∫–∞–∑–∞–ª–∏—Å—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–µ—Ä—Å–∏–π DOOM.

–¢–∞–∫ –º–Ω–æ–≥–æ —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–≤ ‚Äî –Ω–∞—Å—Ç–æ—è—â–∏–π –ø–æ—Ç–æ–ø –∏–∑ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∫–∞—Ä—Ç –±—ã–ª –Ω–µ–∏–∑–±–µ–∂–µ–Ω.

–û–¥–Ω–æ–π –∏–∑ —Å–∞–º—ã—Ö –≤–ø–µ—á–∞—Ç–ª—è—é—â–∏—Ö —Ä–∞–Ω–Ω–∏—Ö —Å—Ç–∞–ª–∞ STARDOOM ‚Äî —É—Ä–æ–≤–µ–Ω—å –≤ —Å—Ç–∏–ª–µ ¬´–ó–≤–µ–∑–¥–Ω—ã—Ö –≤–æ–π–Ω¬ª —Å–æ —à—Ç—É—Ä–º–æ–≤–∏–∫–∞–º–∏ –∏ –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–æ –∑–≤—É—á–∞—â–∏–º–∏ –ø—É—à–∫–∞–º–∏. –û–Ω –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–ø–∞–ª –º–Ω–æ–≥–∏–º –≤ –¥—É—à—É, –Ω–æ –∏ –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å –ø–æ–º–æ—â—å—é WAD.

–ù–µ –º–µ–Ω–µ–µ –ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–º –æ–∫–∞–∑–∞–ª—Å—è –∏ UACDEAD, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–æ-—Ö–∏—Ç—Ä–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å —Ñ–æ—Ä–º–∞—Ç —Å–µ–∫—Ç–æ—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ –ª–∏–Ω–µ–π–Ω–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–≤–∏–¥–∏–º—ã—Ö –ª–µ—Å—Ç–Ω–∏—Ü —Å–æ —Å–≤–µ—á–∞–º–∏. –£—Ä–æ–≤–µ–Ω—å –æ–∫–∞–∑–∞–ª—Å—è –∂—É—Ç–∫–∏–º, —Å –≥–Ω–µ—Ç—É—â–µ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π.

–¢–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞—Å —É–¥–∏–≤–ª—è–ª–∏ –∏ —Ä–∞–¥–æ–≤–∞–ª–∏, –ø–æ–ø—É—Ç–Ω–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å DOOM.

–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –ø–æ–æ—â—Ä—è—Ç—å –º–æ–¥–¥–∏–Ω–≥ —Å–æ–∑–¥–∞–ª–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–æ–≤—É—é –ø–∞—Ä–∞–¥–∏–≥–º—É. –ò–≥—Ä–æ–∫–∏ –ø–æ–ª—É—á–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–º–µ—à–∞—Ç—å –≤ DOOM —á—Ç–æ —É–≥–æ–¥–Ω–æ: –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–∏—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –∑–≤—É–∫–∏ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.

–ú–Ω–µ —ç—Ç–æ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å —Å–º–µ—à–Ω—ã–º: –≤ –∫–æ–º–ø–∞–Ω–∏–∏ –∑–∞–ª–æ–∂–∏–ª–∏ –æ—Å–Ω–æ–≤—É –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ñ–∞–Ω–∞—Ç—ã –º–æ–≥–ª–∏ —Å–¥–µ–ª–∞—Ç—å DOOM in ‚ÄúCopyright Infringement‚Äù.

–•–æ—Ç—è –∫–æ–µ-–∫—Ç–æ –≤ id –≤–æ–∑—Ä–∞–∂–∞–ª –ø—Ä–æ—Ç–∏–≤ –ø–æ–¥–æ–±–Ω–æ–π –æ—Ç–∫—Ä—ã—Ç–æ—Å—Ç–∏, —É —Ç–∞–∫–æ–≥–æ —à–∞–≥–∞ –∏–º–µ–ª—Å—è –µ—â–µ –æ–¥–∏–Ω –ø–ª—é—Å: —ç—Ç–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Å—Ä–∞–∑—É –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—É–ø–µ–Ω—è—Ö. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–µ–ª–∏–ª–∏—Å—å —Å–≤–æ–∏–º–∏ —Ç—Ä—É–¥–∞–º–∏, —á—Ç–æ –ø–æ–≤—ã—à–∞–ª–æ —É–∑–Ω–∞–≤–∞–µ–º–æ—Å—Ç—å –∏–≥—Ä—ã (—Ç–æ–≥–¥–∞ –º—ã –µ—â–µ –Ω–µ –∑–Ω–∞–ª–∏ —Ç–µ—Ä–º–∏–Ω–∞ ¬´–∑–∞–≤–∏—Ä—É—Å–∏—Ç—å—Å—è¬ª).

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–∏—á–µ–≥–æ –ø–æ–¥–æ–±–Ω–æ–≥–æ –≤ –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ –ø—Ä–µ–∂–¥–µ –Ω–µ –±—ã–ª–æ, –∏ —Ç–∞–∫ –º—ã –¥–æ–∫–∞–∑–∞–ª–∏ —Å–∞–º–∏–º —Å–µ–±–µ –Ω–∞—à—É –∏—Å—Ç–∏–Ω–Ω—É—é —Å—É—â–Ω–æ—Å—Ç—å. –ú—ã –±—ã–ª–∏ —Ö–∞—Ä–¥–∫–æ—Ä–Ω—ã–º–∏ –≥–µ–π–º–µ—Ä–∞–º–∏ –∏ —Ç–µ—Ö–Ω–æ–º–∞–Ω—å—è–∫–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –¥—É–º–∞–ª–∏ –æ —Ç–æ–º, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫—Ä—É—Ç–æ–π –ø—Ä–æ–¥—É–∫—Ç –∏ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏, –∞ –Ω–µ –æ —Ç–æ–º, –∫–∞–∫ –æ–±–æ–±—Ä–∞—Ç—å —Ñ–∞–Ω–∞—Ç–æ–≤ –¥–æ –Ω–∏—Ç–æ—á–∫–∏.

–°–µ–≥–æ–¥–Ω—è –º–Ω–æ–≥–∏–µ –∫—Ä—É–ø–Ω—ã–µ —Ç–∞–π—Ç–ª—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –Ω–µ–¥–æ—Ä–æ–≥–æ–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –¥–ª—è —Ñ–∞–Ω–∞—Ç–æ–≤ –∏ –ø—Ä–æ–¥–ª–∏—Ç—å –∂–∏–∑–Ω—å –∏–≥—Ä—ã. –ê –µ—â–µ ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∏—Ä—É—Å–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞ –¥–ª—è –ª—é–±–æ–≥–æ –∏–≥—Ä–æ–≤–æ–≥–æ –±—Ä–µ–Ω–¥–∞.

–ß—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–ª–æ DOOM –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤, —Ç–∞–∫ —ç—Ç–æ –¥–µ–∑–º–∞—Ç—á.

"""

    print("\n" + "=" * 80)
    print("üìù –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:")
    print("=" * 80)
    print(example_text[:200] + "...")
    print("\n" + "=" * 80)
    
    # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –º–æ–¥—É–ª–µ–º
    print("\nüöÄ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –º–æ–¥—É–ª–µ–º StateTransformationExtractor...")
    print("‚è≥ –û–∂–∏–¥–∞–π—Ç–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è...\n")
    
    result = extractor(source_text=example_text)
    
    # –í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
    print("=" * 80)
    print("‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç:")
    print("=" * 80)
    print(f"–ù–∞–∑–≤–∞–Ω–∏–µ —Å–≤—è–∑–∫–∏: {result.relation_title}")
    print("-" * 80)
    print("–ê–Ω–∞–ª–∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–π:")
    
    if isinstance(result.state_analysis, list):
        for i, item in enumerate(result.state_analysis, 1):
            print(f"\n  üîÑ –°–≤—è–∑–∫–∞ {i}:")
            print(f"    üî∏ –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: {item.get('initial_state', 'N/A')}")
            print(f"    üîπ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:     {item.get('transformation', 'N/A')}")
            print(f"    ‚úÖ –ö–æ–Ω–µ—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:  {item.get('final_state', 'N/A')}")
    else:
        print(result.state_analysis)

    print("=" * 80)
    
    print("\n‚úÖ –î–µ–º–æ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!")
    print(f"\nüìö –ò—Å—Ç–æ—á–Ω–∏–∫: https://vikent.ru/enc/4688/")


if __name__ == "__main__":
    main()

