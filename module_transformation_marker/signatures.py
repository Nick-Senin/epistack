"""
Сигнатуры для модуля TransformationMarker
"""
import dspy


class TransformationMarkerSignature(dspy.Signature):
    """
    Найди в тексте все части, которые семантически связаны с указанными преобразованиями, 
    и выдели их жирным шрифтом в markdown формате (**текст**).
    
    Задача:
    1. Проанализируй текст и список преобразований
    2. Определи какие части текста относятся к каждому преобразованию (семантически, не только по точному совпадению)
    3. Оберни эти части в **двойные звёздочки** для markdown выделения
    4. Верни весь текст с выделениями
    
    Правила:
    - Выделяй только те части, которые действительно относятся к преобразованиям
    - Можно выделять слова, фразы или целые предложения
    - Используй семантический анализ, а не только поиск ключевых слов
    - Сохрани исходную структуру и форматирование текста
    - Не добавляй лишние символы или изменения
    """
    
    text = dspy.InputField(desc="Исходный текст для обработки")
    transformations: list[str] = dspy.InputField(desc="Массив преобразований для поиска в тексте")
    
    marked_text = dspy.OutputField(desc="Текст с markdown выделением жирным (**...**) частей, связанных с преобразованиями")
