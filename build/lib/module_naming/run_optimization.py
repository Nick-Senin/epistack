"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—è –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —Å GEPA
"""
import os
import sys
sys.path.insert(0, os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from config.llm import configure_llm
from module_naming import optimize


def main():
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM
    print("üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ LLM...")
    configure_llm()
    
    # –ó–∞–ø—É—Å–∫ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –¥–∞—Ç–∞—Å–µ—Ç–æ–º
    print("\nüöÄ –ó–∞–ø—É—Å–∫ GEPA –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏...")
    print("=" * 60)
    
    optimized_module = optimize(
        hf_username=None,  # None = –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç
        max_metric_calls=50
    )
    
    print("\n" + "=" * 60)
    print("‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")
    
    # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è
    print("\nüß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è...")
    test_text = """–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏–º–µ–Ω–∏–ª –º–µ—Ç–æ–¥ –¥–∏—Å—Ç–∏–ª–ª—è—Ü–∏–∏ –∑–Ω–∞–Ω–∏–π, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ 
—Å–ª–æ–∂–Ω—É—é –º–æ–¥–µ–ª—å –≤ –±–æ–ª–µ–µ –∫–æ–º–ø–∞–∫—Ç–Ω—É—é, —Å–æ—Ö—Ä–∞–Ω–∏–≤ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏. 
–ó–∞—Ç–µ–º –æ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–ª –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –ø–∞–π–ø–ª–∞–π–Ω–∞."""
    
    result = optimized_module(source_text=test_text)
    print(f"\nüìù –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ:\n   {result.causal_relation}")
    
    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    save_path = "/Users/admin/Documents/repos/epistack/module_naming/optimized_module.json"
    try:
        optimized_module.save(save_path)
        print(f"\nüíæ –ú–æ–¥—É–ª—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω: {save_path}")
    except Exception as e:
        print(f"\n‚ö†Ô∏è  –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å: {e}")


if __name__ == "__main__":
    main()

