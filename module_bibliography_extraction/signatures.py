"""
Сигнатуры для модуля извлечения библиографической информации
"""
import dspy


class BibliographyExtractionSignature(dspy.Signature):
    """
    Извлеки из текста библиографическую информацию о книге.
    
    Формат входных данных: любой текст, который может содержать информацию о книге.
    
    Формат выходных данных: каждое поле должно быть заполнено в следующем формате:
    **Название:** название книги (если найдено)
    **Автор:** автор книги в формате И. О. Фамилия (если найден)
    **Издательство:** название издательства (если найдено)
    **Год издания:** год выпуска книги (если найден)
    **Место издания:** город или место издания (если найдено)
    
    Правила:
    - Если информация не найдена в тексте, оставь поле пустым или укажи "Не указано"
    - Извлекай только фактическую информацию из текста
    - Не придумывай данные, которых нет в тексте
    - Формат должен точно соответствовать указанному выше
    - Для недостающих полей попытайся сделать обоснованные предположения на основе имеющихся данных
    """
    
    text = dspy.InputField(desc="Текст для анализа, который может содержать библиографическую информацию")
    
    title = dspy.OutputField(desc="Название книги в формате: **Название:** значение")
    author = dspy.OutputField(desc="Автор книги в формате: **Автор:** значение")
    publisher = dspy.OutputField(desc="Издательство в формате: **Издательство:** значение")
    year = dspy.OutputField(desc="Год издания в формате: **Год издания:** значение")
    place = dspy.OutputField(desc="Место издания в формате: **Место издания:** значение")
    inferred_info = dspy.OutputField(desc="Дополнительная информация: попытайся восстановить ТОЛЬКО недостающие поля на основе имеющихся данных. Формат: перечисление предположений с пояснениями")

